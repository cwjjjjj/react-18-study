<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <style style="display: block" contenteditable="true">
      .test {
        height: 100px;
        width: 100px;
        background-color: red;
      }
      input {
        color: orange;
      }
      input:focus {
        border-color: Highlight;
      }
    </style>
    <div class="test"></div>
    <div id="aa">hhhh</div>
    <template> <div>bbb</div></template>
    <div onclick="keyBoard()">qqq</div>
    <input type="text" style="outline: none" />
    <script>
      function handleClick() {
        console.log("click");
      }
      const test = () => {
        console.log("test1");
        throw new Error("哦豁 出错了");
        console.log("test2");
      };
      try {
        test();
      } catch (error) {
        console.log("error", error);
      }

      function fireKeyEvent(el, evtType, keyCode) {
        var evtObj;
        if (document.createEvent) {
          if (window.KeyEvent) {
            //firefox 浏览器下模拟事件
            evtObj = document.createEvent("KeyEvents");
            evtObj.initKeyEvent(
              evtType,
              true,
              true,
              window,
              true,
              false,
              false,
              false,
              keyCode,
              0
            );
          } else {
            //chrome 浏览器下模拟事件
            evtObj = document.createEvent("UIEvents");
            evtObj.initUIEvent(evtType, true, true, window, 1);

            delete evtObj.keyCode;
            if (typeof evtObj.keyCode === "undefined") {
              //为了模拟keycode
              Object.defineProperty(evtObj, "keyCode", { value: keyCode });
            } else {
              evtObj.key = String.fromCharCode(keyCode);
            }

            if (typeof evtObj.ctrlKey === "undefined") {
              //为了模拟ctrl键
              Object.defineProperty(evtObj, "ctrlKey", { value: true });
            } else {
              evtObj.ctrlKey = true;
            }
          }
          el.dispatchEvent(evtObj);
        } else if (document.createEventObject) {
          //IE 浏览器下模拟事件
          evtObj = document.createEventObject();
          evtObj.keyCode = keyCode;
          el.fireEvent("on" + evtType, evtObj);
        }
      }
      fireKeyEvent(window, "keydown", 40);

      const keyBoard = () => {
        const ke = new KeyboardEvent("keydown", {
          bubbles: true,
          cancelable: true,
          keyCode: 13,
          metaKey: true,
        });
        document.body.dispatchEvent(ke);
      };

      window.addEventListener("keydown", function (e) {
        console.log(e.keyCode);
      });

      // if ("serviceWorker" in navigator) {
      //   window.addEventListener("load", function () {
      //     // 所以Service Worker只是一个挂在navigator对象上的HTML5 API而已
      //     navigator.serviceWorker.register("/service-worker.js").then(
      //       function (registration) {
      //         console.log("我注册成功了666");
      //       },
      //       function (err) {
      //         console.log("我注册失败了");
      //       }
      //     );
      //   });
      // }
      var worker = new Worker("./worker.js");
    </script>
  </body>
</html>
